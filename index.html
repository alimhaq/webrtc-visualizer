<!DOCTYPE html>
<html>
<head>
  <script type='text/javascript' src='https://cdn.scaledrone.com/scaledrone.min.js'></script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <style>
    body {
      display: flex;
      height: 100vh;
      margin-top: 20px;
      align-items: center;
      justify-content: center;
      padding: 0 50px;
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(rgba(29, 67, 80, 1), rgba(164, 57, 49, 1));
    }
    .title {
      position: fixed;
      font-weight: bold;
      top: 30px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 16px;
      color: rgba(255, 255, 255, 0.7);
    }
    .instruction {
      position: fixed;
      top: 60px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 16px;
      color: rgba(255, 255, 255, 0.7);
    }
    /* The Modal (background) */
  .modal {
      display: inline-block;
      position: fixed; /* Stay in place */
      z-index: 1; /* Sit on top */
      padding-top: 100px; /* Location of the box */
      left: 0;
      top: 0;
      width: 100%; /* Full width */
      height: 100%; /* Full height */
      overflow: auto; /* Enable scroll if needed */
      background-color: rgb(0,0,0); /* Fallback color */
      background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
  }

  /* Modal Content */
  .modal-content {
      position: relative;
      background-color: #fefefe;
      margin: auto;
      padding: 0;
      /* border: 1px solid #888; */
      width: 80%;
      box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);
      -webkit-animation-name: animatetop;
      -webkit-animation-duration: 0.4s;
      animation-name: animatetop;
      animation-duration: 0.4s;
  }

  /* Add Animation */
  @-webkit-keyframes animatetop {
      from {top:-300px; opacity:0} 
      to {top:0; opacity:1}
  }

  @keyframes animatetop {
      from {top:-300px; opacity:0}
      to {top:0; opacity:1}
  }

  /* The Close Button */
  .close {
      color: white;
      float: right;
      font-size: 28px;
      font-weight: bold;
  }

  .close:hover,
  .close:focus {
      color: #000;
      text-decoration: none;
      cursor: pointer;
  }

  .modal-header {
      padding: 2px 16px;
      background-color: #8b0000;
      color: white;
  }

  .modal-body {padding: 2px 16px;}

  .modal-footer {
      padding: 2px 16px;
      background-color: #8b0000;
      color: white;
  }
  </style>
</head>
<body>
  <div class="title">WebRTC Audio Visualizer</div>
  <div class="instruction" id="instruct">To start the call and visualization, please share the URL.</div>
  <div id="myModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <span class="close">&times;</span>
          <h2>WebRTC Audio Visualizer Instructions</h2>
        </div>
        <div class="modal-body">
          <p>WebRTC Visualizer is a completely front-end application designed using vanilla JavaScript that converts the audio from two connected peers to a singular visual output, allowing for a stylized visualized interplay between them, and as such providing a more interactive experience for WebRTC voice communication.</p>
          <p> To initiate a call, simply share the URL (including the unique hash) from the address bar above with a friend. A call will initiate as long as both users are using WebRTC supported web browsers (Chrome, Firefox, Edge, etc.).</p>
          <p>For the full experience, WebRTC Audio Visualizer should ideally be used with two peers (both connecting on different computers). However, if you would like to demo the app without a second user, copy and paste the link into a new tab or window in a WebRTC enabled browser. This will initiate a WebRTC connection with one computer as both the host and offerer.</p>
          <center><img src="https://media.giphy.com/media/3ohjUR71QZtaMKtaEM/giphy.gif"></center>
          <p>Please be aware that this means that the audio output from your speakers will be whatever is inputted into the mic, which could cause feedback.</p>
        </div>
        <div class="modal-footer">
          <center><h4><a href="https://github.com/alimhaq/webrtc-visualizer" target="_blank"><img src="https://2sxc.org/Portals/0/adam/Content/4IqBjx3pXEC7a7-fVX2GBQ/Image/github-logo.png" alt="Github Repo" style="width:40px;height:40px;"></a></h4></center>
        </div>
      </div>
    </div>
  <canvas id="visualizer"></canvas>
  <audio id="localAudio" autoplay muted></audio>
  <audio id="remoteAudio" autoplay></audio>
  <script src="entry.js"></script>
</body>
</html>